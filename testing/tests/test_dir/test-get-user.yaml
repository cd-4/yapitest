test-get-user:
  setup: create-user
  steps:
    - path: /api/user
      method: GET
      headers:
        API-Token: $setup.token
      assert:
        body:
          name: $setup.username

test-update-username:
  setup: create-user
  steps:
    - path: /api/user
      method: PUT
      headers:
        API-Token: $setup.token
      data:
        username: "NewUsername"
      assert:
        body:
          body: "Username updated successfully"
    - path: /api/user
      headers:
        API-Token: $setup.token
      assert:
        body:
          name: NewUsername

test-get-users:
  steps:
    - path: /api/user/list
      assert:
        body:
          len(users): <=10


test-get-user-by-username:
  setup: create-user
  steps:
    - path: /api/user/$setup.username
      assert:
        body:
          name: "!str"
          id: "!int"

